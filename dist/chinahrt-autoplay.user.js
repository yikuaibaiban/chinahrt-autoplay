// ==UserScript==
// @name         chinahrt继续教育；chinahrt全自动刷课；解除系统限制；
// @version      2024.03.06.01
// @namespace    https://github.com/yikuaibaiban/chinahrt
// @description  【❤全自动刷课❤】功能可自由配置，只需将视频添加到播放列表，后续刷课由系统自动完成；使用教程：https://www.cnblogs.com/ykbb/p/16695563.html
// @author       yikuaibaiban
// @icon         data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAArFJREFUWEftlttPE0EUxr+9ddtdYOXSSmmlFFoasSFemmg0qYkIMfGF/9J/wTeN0cSYGBHEBBIoLSIU0VrKpe1eagaySWVmutu+GJPO4+5cfvOdc745wkGl3sI/HEIf4L9ToHrqoHLi4LTRgmm1IAhAMCDgmi4ibEgQhe4SyncOFA9tFMoWaucO9wRJFDAZlpCeUKAq/kA8AY7PHKwWmqic+i8WRRaQTciIj8qeFB0Bjo4dvN9ooOX/7L8OnLshYybaWQouALn5m/XeD3dJ5qcCSEQkrhJcgLfrdabshV8mvtdsPEoEPeV1JzzOqhjSROZ8JsBO2cJa0WQueLFSQ6lqYWpYQT4ZQnSQfzt3g+iwhFw64B/g9VqDm+0uANlNkYB8UkMupnqqkc+qMBgqUAqQOiex5412AHdOJhzAUlqDpvBNIBOXMTtBJyQF0El+ciALgHwfUEUspjTMjrGzPmKIuJ+hlaIA1ksmtg+srhRon7wwE0IuTieoHhTwZJ7+TgGsbDexe2T3DJAdV/E8o1HriTMu3QlR3ymAz4UmSj96A1AkActzOqZH6DD4BtjYM7G5130IYkMynmV0jHHqfXRQxMObPnKg/NvGh81mVyG4HQ1gcVYH22out5oel3Fr0kcVOC3g5cdz2JxH72oVPE1ruDfh7QMPMirCBo3IdMIvRfPi6WUNF2BMl0Aynjii1yAGRIyINZgADRN4tVa/aDiujnfFOg5PbCykNAyp/roPYsPEjn0DkInfflr4tMV+D7xu3P4/eV1GNsFXqWM/sLVv4usuvyK8QGIjEu6m2I+Qu9azIyKt2OoOvyp4EF439w1AJpLmhHjDfoVvUO6GJOHSMZkb86vAngq0L6ieOSA+UalddsWWfZmkA0ERhi4iYkjMUusUqq4AvGLey/8+QF+BP0npcPDdfTv7AAAAAElFTkSuQmCC
// @match        http://*.chinahrt.com/*
// @match        https://*.chinahrt.com/*
// @match        http://videoadmin.chinahrt.com.cn/videoPlay/play*
// @match        http://videoadmin.chinahrt.com/videoPlay/play*
// @match        https://videoadmin.chinahrt.com.cn/videoPlay/play*
// @match        https://videoadmin.chinahrt.com/videoPlay/play*//
// @grant        unsafeWindow
// @grant        GM_setValue
// @grant        GM_getValue
// @grant        GM_addValueChangeListener
// @grant        GM_notification
// @grant        GM_addStyle
// @grant        GM_getResourceText
// ==/UserScript==
function initStyles(){var e=document.createElement("style");e.appendChild(document.createTextNode('.autoPlayBox {    position: fixed;    right: 0;    top: 0;    width: 250px;    height: 280px;    background-color: #FFF;    z-index: 9999;    border: 1px solid #ccc;    overflow-y: auto;}.autoPlayBox > .title {    border-bottom: 1px solid #ccc;    padding: 5px;    /*font-weight: bold;*/}.autoPlayBox .item {    border-bottom: 1px dotted #ccc;    padding: 5px 0;    font-size: 14px;}.autoPlayBox .item .title {    /*border-bottom: 1px dotted #ccc;*/    padding-bottom: 5px;    display: inline-block;    font-weight: bold;}.autoPlayBox .item .title:after {    content: ":";    margin-right: 5px;}.autoPlayBox .item .remark {    font-size: 12px;    color: #c1c1c1;    /*font-weight: bold;*/}.autoPlayBox label {    margin-right: 3px;}.autoPlayBox label input {    margin-left: 2px;}.canPlaylist {    width: 300px;    height: 500px;    position: fixed;    top: 100px;    background: rgba(255, 255, 255, 1);    right: 80px;    border: 1px solid #c1c1c1;    overflow-y: auto;}.canPlaylist .oneClick {    margin: 0 auto;    width: 100%;    border: none;    padding: 6px 0;    background: linear-gradient(180deg, #4BCE31, #4bccf2);    height: 50px;    border-radius: 5px;    color: #FFF;    font-weight: bold;    letter-spacing: 4px;    font-size: 18px;}.canPlaylist .item {    border-bottom: 1px solid #c1c1c1;    padding: 8px;    line-height: 150%;    border-bottom: 1px solid #c1c1c1;    margin-bottom: 3px;}.canPlaylist .item .title {    font-size: 13px;    white-space: nowrap;    overflow: hidden;    text-overflow: ellipsis;}.canPlaylist .item .status {    font-size: 12px;    white-space: nowrap;    overflow: hidden;    text-overflow: ellipsis;    color: #c1c1c1;}.canPlaylist .item .addBtn {    color: #FFF;    background-color: #4bccf2;    border: none;    padding: 5px 10px;    margin-top: 4px;}.canPlaylist .item .addBtn.disable {    color: #000;    background-color: #c3c3c3;}.dragBox {    position: fixed;    right: 0;    top: 0;    width: 250px;    height: 280px;    background-color: #FFF;    z-index: 9999;    border: 1px solid #ccc;    overflow-y: auto;}.dragBox > .title {    border-bottom: 1px solid #ccc;    padding: 5px;    /*font-weight: bold;*/}.dragBox .item {    border-bottom: 1px dotted #ccc;    padding: 5px 0;    font-size: 14px;}.dragBox .item .title {    /*border-bottom: 1px dotted #ccc;*/    padding-bottom: 5px;    display: inline-block;    font-weight: bold;}.dragBox .item .title:after {    content: ":";    margin-right: 5px;}.dragBox .item .remark {    font-size: 12px;    color: #c1c1c1;    /*font-weight: bold;*/}.dragBox label {    margin-right: 3px;}.dragBox label input {    margin-left: 2px;}.feedbackBox {    font-size: 14px;    font-weight: bold;    background-color: #FFF;    padding: 4px 7px;    position: absolute;    top: 0;    line-height: 30px;    z-index: 99999;    display: flex;    flex-direction: row;    left: 30px;    flex-wrap: wrap;    width: 226px;}.feedbackBox .link {    /*font-size: 18px;*/    padding: 8px 0 8px 10px;    /*color: #4bccf2;*/}.feedbackBox .notice {    font-size: 14px;    color: red;    border-bottom: 2px dotted #c1c1c1;}.feedbackBox .changelog {    margin: 10px 0;    border-bottom: 2px dotted #c1c1c1;}.multiSegmentBox {    position: fixed;    right: 255px;    top: 0;    width: 250px;    height: 280px;    background-color: #FFF;    z-index: 9999;    border: 1px solid #ccc;}.multiSegmentBox .tip {    border-bottom: 1px solid #ccc;    padding: 5px;    font-weight: bold;    color: red;}.multiSegmentBox .item {    font-size: 14px;}.multiSegmentBox label {    margin-right: 3px;}.multiSegmentBox label input {    margin-left: 2px;}.muteBox {    position: fixed;    right: 0;    top: 0;    width: 250px;    height: 280px;    background-color: #FFF;    z-index: 9999;    border: 1px solid #ccc;    overflow-y: auto;}.muteBox > .title {    border-bottom: 1px solid #ccc;    padding: 5px;    /*font-weight: bold;*/}.muteBox .item {    border-bottom: 1px dotted #ccc;    padding: 5px 0;    font-size: 14px;}.muteBox .item .title {    /*border-bottom: 1px dotted #ccc;*/    padding-bottom: 5px;    display: inline-block;    font-weight: bold;}.muteBox .item .title:after {    content: ":";    margin-right: 5px;}.muteBox .item .remark {    font-size: 12px;    color: #c1c1c1;    /*font-weight: bold;*/}.muteBox label {    margin-right: 3px;}.muteBox label input {    margin-left: 2px;}.controllerBox{}.controllerBox .title{}.playlistBox {    position: fixed;    right: 0;    top: 290px;    width: 250px;    height: 450px;    background-color: #FFF;    z-index: 9999;    border: 1px solid #ccc;    overflow-y: auto;}.playlistBox .oneClear {    margin: 0 auto;    width: 100%;    border: none;    padding: 6px 0;    background: linear-gradient(180deg, #4BCE31, #4bccf2);    height: 50px;    border-radius: 5px;    color: #FFF;    font-weight: bold;    letter-spacing: 4px;    font-size: 18px;}.playlistBox .title {    border-bottom: 1px solid #ccc;    padding: 5px;    font-weight: bold;}.playlistBox .child_title {    font-size: 13px;    white-space: nowrap;    overflow: hidden;    text-overflow: ellipsis;}.playlistBox .child_remove {    color: #FFF;    background-color: #fd1952;    border: none;    padding: 5px 10px;    margin: 4px 0 10px 0;}.speedBox {    position: fixed;    right: 0;    top: 0;    width: 250px;    height: 280px;    background-color: #FFF;    z-index: 9999;    border: 1px solid #ccc;    overflow-y: auto;}.speedBox > .title {    border-bottom: 1px solid #ccc;    padding: 5px;    /*font-weight: bold;*/}.speedBox .item {    border-bottom: 1px dotted #ccc;    padding: 5px 0;    font-size: 14px;}.speedBox .item .title {    /*border-bottom: 1px dotted #ccc;*/    padding-bottom: 5px;    display: inline-block;    font-weight: bold;}.speedBox .item .title:after {    content: ":";    margin-right: 5px;}.speedBox .item .remark {    font-size: 12px;    color: #c1c1c1;    /*font-weight: bold;*/}.speedBox label {    margin-right: 3px;}.speedBox label input {    margin-left: 2px;}')),document.head.appendChild(e)}function autoPlay(e){return e?(GM_setValue("autoPlay",e),e):GM_getValue("autoPlay",!0)}function mute(e){return e?(GM_setValue("mute",e),e):GM_getValue("mute",!0)}function drag(e){return e?(GM_setValue("drag",e),e):GM_getValue("drag",!0)}function speed(e){return e?(GM_setValue("speed",e),e):GM_getValue("speed",1)}function playMode(e){return e?(GM_setValue("playMode",e),e):GM_getValue("playMode","loop")}function addCourse(e){if(!e.title||!e.url)return notification("课程添加失败，缺少必要参数。"),!1;let t=t();return courseAdded(t,e.url)?(notification("课程已经在播放列表中。"),!1):(t.push({title:e.title,url:e.url}),t(t),!0)}function removeCourse(e){let t=t();if(Number.isNaN(e))for(let e=t.length;0<=e;e--){var a=t[e].url,o=a.match(/sectionId=([^&]*)/)[1],n=a.match(/courseId=([^&]*)/)[1],a=a.match(/trainplanId=([^&]*)/)[1],i=window.location.href,l=i.match(/sectionId=([^&]*)/)[1],r=i.match(/courseId=([^&]*)/)[1],i=i.match(/trainplanId=([^&]*)/)[1];n===r&&o===l&&a===i&&t.splice(e,1)}else t.splice(e,1);t(t)}function courseAdded(e,t){return e&&Array.isArray(e)?-1<e.findIndex(e=>e.url===t):-1<e().findIndex(e=>e.url===t)}function coursesList(e){return e?Array.isArray(e)?General.setValue(coursesKey,e):(notification("保存课程数据失败，数据格式异常。"),[]):(e=General.getValue(coursesKey,[]),Array.isArray(e)?e:[])}function appendToCanPlaylist(t){var a=document.getElementById("canPlaylist");if(Array.isArray(t)&&a)for(let e=0;e<t.length;e++){var o=t[e];a.dispatchEvent(new CustomEvent("append",{detail:o}))}}function getJQueryCourses(){var t=[];if(this.pageCategory()===General.pageCategory.detail){var a=document.querySelectorAll("a");for(let e=0;e<a.length;e++){var o=a[e];-1<o.href.indexOf("/course/play_video")&&t.push({title:o.innerText,url:o.href,status:$(o).prev().text()})}}return t}function notification(e){GM_notification({text:e,title:"Chinahrt自动刷课",image:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAArFJREFUWEftlttPE0EUxr+9ddtdYOXSSmmlFFoasSFemmg0qYkIMfGF/9J/wTeN0cSYGBHEBBIoLSIU0VrKpe1eagaySWVmutu+GJPO4+5cfvOdc745wkGl3sI/HEIf4L9ToHrqoHLi4LTRgmm1IAhAMCDgmi4ibEgQhe4SyncOFA9tFMoWaucO9wRJFDAZlpCeUKAq/kA8AY7PHKwWmqic+i8WRRaQTciIj8qeFB0Bjo4dvN9ooOX/7L8OnLshYybaWQouALn5m/XeD3dJ5qcCSEQkrhJcgLfrdabshV8mvtdsPEoEPeV1JzzOqhjSROZ8JsBO2cJa0WQueLFSQ6lqYWpYQT4ZQnSQfzt3g+iwhFw64B/g9VqDm+0uANlNkYB8UkMupnqqkc+qMBgqUAqQOiex5412AHdOJhzAUlqDpvBNIBOXMTtBJyQF0El+ciALgHwfUEUspjTMjrGzPmKIuJ+hlaIA1ksmtg+srhRon7wwE0IuTieoHhTwZJ7+TgGsbDexe2T3DJAdV/E8o1HriTMu3QlR3ymAz4UmSj96A1AkActzOqZH6DD4BtjYM7G5130IYkMynmV0jHHqfXRQxMObPnKg/NvGh81mVyG4HQ1gcVYH22out5oel3Fr0kcVOC3g5cdz2JxH72oVPE1ruDfh7QMPMirCBo3IdMIvRfPi6WUNF2BMl0Aynjii1yAGRIyINZgADRN4tVa/aDiujnfFOg5PbCykNAyp/roPYsPEjn0DkInfflr4tMV+D7xu3P4/eV1GNsFXqWM/sLVv4usuvyK8QGIjEu6m2I+Qu9azIyKt2OoOvyp4EF439w1AJpLmhHjDfoVvUO6GJOHSMZkb86vAngq0L6ieOSA+UalddsWWfZmkA0ERhi4iYkjMUusUqq4AvGLey/8+QF+BP0npcPDdfTv7AAAAAElFTkSuQmCC"})}function getVueInstance(){return document.querySelector("article")?.__vue__}function isVue(){return void 0!==getVueInstance()}function registerRouterChange(){getVueInstance().$router.afterEach((e,t,a)=>{e.path})}function getVueCourses(){var t=[],a=getVueInstance()?.$route?.query,o=getVueInstance()?._data?.pageData?.course?.chapter_list;if(o&&0<o.length)for(let e=0;e<o.length;e++){var n=o[e]?.section_list;if(n&&0<n.length)for(let e=0;e<n.length;e++){var i=n[e],l=window.location.protocol+"//"+window.location.host+window.location.pathname+"#/v_video?platformId="+a.platformId+"&trainplanId="+a.trainplanId+"&courseId="+a.courseId+"&sectionId="+i.id;t.push({title:i.name,url:l,status:i.study_status+"( "+i.studyTimeStr+" )"})}}return t}function createAutoPlayOption(){let o=document.createElement("div");o.classList.add("autoPlayBox");var e=document.createElement("p");e.classList.add(".title"),e.innerText="自动播放",o.appendChild(e);return[{text:"是",value:!0},{text:"否",value:!1}].forEach(e=>{var t=document.createElement("label"),a=(t.innerText=e.text,o.appendChild(t),document.createElement("input"));a.type="radio",a.name="autoPlay",a.value=e.value,a.checked=autoPlay()===e.value,a.onclick=function(){autoPlay(e.value)},t.appendChild(a)}),o}function createCanPlaylist(){let a=document.createElement("div");a.id="canPlaylist",a.className="canPlaylist";var e=document.createElement("button");return e.innerText="一键添加",e.type="button",e.className="oneClick",e.onclick=function(){var e,t;for(e of a.getElementsByClassName("item"))for(t of e.getElementsByTagName("button"))t.disabled||t.click()},a.appendChild(e),a.addEventListener("clear",function(){for(;a.firstChild;)a.removeChild(a.firstChild)}),a.addEventListener("append",function(e){var t=document.createElement("div"),a=(t.className="item",this.appendChild(t),document.createElement("p")),a=(a.innerText=e.detail.title,a.title=e.detail.title,a.className="title",t.appendChild(a),document.createElement("p")),a=(a.innerText=e.detail.status,a.title=e.detail.status,a.className="status",t.appendChild(a),General.courseAdded(void 0,e.detail.url)),o=document.createElement("button");o.innerText=a?"已在列表中":"添加到播放列表",o.type="button",o.disabled=a,o.className=a?"addBtn disable":"addBtn",o.onclick=function(){General.addCourse(e.detail)&&(this.setAttribute("disabled",!0),this.setAttribute("class","addBtn disable"),this.innerText="已在列表中")},t.appendChild(o)}),document.body.append(a),a}function createDragOption(){let o=document.createElement("div");o.classList.add("dragBox");var e=document.createElement("p"),e=(e.classList.add(".title"),e.innerText="拖动",o.appendChild(e),[{text:"还原",value:5},{text:"启用",value:1}].forEach(e=>{var t=document.createElement("label"),a=(t.innerText=e.text,o.appendChild(t),document.createElement("input"));a.type="radio",a.name="drag",a.value=e.value,a.checked=drag()===e.value,a.onclick=function(){drag(e.value)},t.appendChild(a)}),document.createElement("p"));return e.classList.add(".remark"),e.innerText="注意：慎用此功能，后台可能会检测播放数据。",o.appendChild(e),o}function createFeedbackBox(){var e=document.createElement("div"),t=(e.className="feedbackBox",document.body.appendChild(e),document.createElement("div")),t=(t.className="changelog",t.innerHTML="1.本次重构了所有代码。<br/>2.修复了鼠标移出视频会暂停的问题。<br/>3.增加了'一键添加'到播放列表与'一键清空'的功能。<br/>4.修复一些已知错误。<br/>",e.appendChild(t),document.createElement("div"));t.innerHTML="点击课程详情页中的插件提供的【添加到播放列表】按钮添加需要自动播放的课程。<br/>受到浏览器策略影响第一次可能无法自动播放，请手动点击播放或在控制配置中设置为静音，再刷新。",t.className="notice",e.appendChild(t);for(const o of[{title:"使用教程",link:"https://www.cnblogs.com/ykbb/p/16695563.html"},{title:"博客园",link:"https://www.cnblogs.com/ykbb/"},{title:"留言",link:"https://msg.cnblogs.com/send/ykbb"},{title:"GitHub",link:"https://github.com/yikuaibaiban/chinahrt-autoplay/issues"}]){var a=document.createElement("a");a.innerText=o.title,a.target="_blank",a.href=o.link,a.className="link",e.appendChild(a)}return e}function createMultiSegmentBox(){let o=document.createElement("div");o.className="multiSegmentBox",document.body.appendChild(o);var e=document.createElement("div");e.innerText="此功能只适用个别地区。无法使用的就不要使用了。",e.className="tip",o.appendChild(e);[{text:"正常",value:0},{text:"二段播放",value:3,title:"将视频分为二段：开始，结束各播放90秒"},{text:"三段播放",value:1,title:"将视频分为三段：开始，中间，结束各播放90秒"},{text:"秒播",value:2,title:"将视频分为两段:开始，结束各播放一秒"}].forEach(e=>{var t=document.createElement("label"),a=(t.innerText=e.text,o.appendChild(t),document.createElement("input"));a.type="radio",a.name="playMode",a.value=e.value,a.checked=mute()===e.value,a.onclick=function(){playMode(e.value)},t.appendChild(a)})}function timeHandler(e){if(void 0!==player){var t,a,o,n=parseInt(player.getMetaDate().duration);if(1===General.playModel())return n<=270?void 0:(t=n/2-45,a=n/2+45,o=n-90,90<e&&e<t?void player.videoSeek(t):a<e&&e<o?void player.videoSeek(o):void 0);2===playModel()?1<e&&e<n-1&&player.videoSeek(n-1):3!==General.playModel()||n<=180||90<e&&e<n-90&&player.videoSeek(n-90)}else notification("找不到播放器")}function createMuteOption(){let o=document.createElement("div");o.classList.add("muteBox");var e=document.createElement("p"),e=(e.classList.add(".title"),e.innerText="静音",o.appendChild(e),[{text:"是",value:!0},{text:"否",value:!1}].forEach(e=>{var t=document.createElement("label"),a=(t.innerText=e.text,o.appendChild(t),document.createElement("input"));a.type="radio",a.name="mute",a.value=e.value,a.checked=mute()===e.value,a.onclick=function(){mute(e.value)},t.appendChild(a)}),document.createElement("p"));return e.classList.add(".remark"),e.innerText="注意：不静音，视频可能会出现不会自动播放",o.appendChild(e),o}function createControllerBox(){var e=document.createElement("div"),t=(e.id="controllerBox",e.className="controllerBox",document.body.appendChild(e),document.createElement("div"));return t.innerText="视频控制配置",t.className="title",e.appendChild(t),e.appendChild(createAutoPlayOption()),e.appendChild(createDragOption()),e.appendChild(createMuteOption()),e.appendChild(createSpeedOption()),e}function playerInit(){player.changeControlBarShow(!0),player.changeConfig("config","timeScheduleAdjust",General.drag()),General.mute()?player.videoMute():player.videoEscMute(),player.changePlaybackRate(General.speed()),General.autoPlay()&&player.videoPlay()}function playInit(){removePauseBlur(),PlayPage.createConfigBox(),PlayPage.createPlaylistBox(),PlayPage.createFeedbackBox(),experimentalHandler.createExperimentalBox(),GM_addValueChangeListener(General.coursesKey,function(e,t,a,o){PlayPage.removePlaylistBox(),PlayPage.createPlaylistBox()}),playerInit(),player.addListener("loadedmetadata",PlayPage.playerInit),player.addListener("ended",function(){General.removeCourse(window.location.href);var e=General.courses();0===e.length?General.notification("所有视频已经播放完毕"):(General.notification("即将播放下一个视频:"+e[0].title),window.top.location.href=e[0].url)}),player.addListener("time",function(e){experimentalHandler.timeHandler(e)})}function createPlaylistBox(){var t=document.createElement("div"),e=(t.id="playlistBox",t.className="playlistBox",document.body.appendChild(t),document.createElement("button")),e=(e.innerText="一键清空",e.className="oneClear",e.onclick=function(){confirm("确定要清空播放列表么？")&&General.courses([])},t.appendChild(e),document.createElement("div")),a=(e.innerText="视频列表",e.className="title",t.appendChild(e),General.courses());for(let e=0;e<a.length;e++){var o=a[e],n=document.createElement("p"),o=(n.innerText=o.title,n.title=o.title,n.className="child_title",t.appendChild(n),document.createElement("button"));o.innerText="移除",o.type="button",o.setAttribute("data",e),o.className="child_remove",o.onclick=function(){confirm("确定要删除这个视频任务么？")&&General.removeCourse(this.getAttribute("data"))},t.appendChild(o)}}function createSpeedOption(){let o=document.createElement("div");o.classList.add("speedBox");var e=document.createElement("p"),e=(e.classList.add(".title"),e.innerText="播放速度",o.appendChild(e),[{text:"0.5x",value:.5},{text:"1x",value:1},{text:"1.25x",value:2},{text:"1.5x",value:3},{text:"2x",value:4}].forEach(e=>{var t=document.createElement("label"),a=(t.innerText=e.text,o.appendChild(t),document.createElement("input"));a.type="radio",a.name="speed",a.value=e.value,a.checked=speed()===e.value,a.onclick=function(){speed(e.value)},t.appendChild(a)}),document.createElement("p"));return e.classList.add(".remark"),e.innerText="注意：慎用此功能，后台可能会检测播放数据。",o.appendChild(e),o}let isVue=!1;function initRouter(e){try{isVue=isVue(),console.log("当前模式：Vue",window.location.href)}catch(e){isVue=!1,console.log("当前模式：JQuery",window.location.href)}if(!isVue){if(-1<e.indexOf("/course/play_video")||-1<e.indexOf("/videoPlay/play")){let e=setInterval(function(){try{player&&(PlayPage.init(),clearInterval(e))}catch(e){console.log("未获取到播放器",e)}},500)}if(-1<e.indexOf("/course/preview"))if(DetailPage.createCanPlaylist(),isVue){let e=setInterval(function(){getVueInstance()&&(VueHandler.registerRouterChange(),DetailPage.appendToCanPlaylist(getVueCourses()),clearInterval(e))},500)}else appendToCanPlaylist(getJQueryCourses())}if(isVue&&"/v_courseDetails"===getVueInstance()?.$route?.path)if(DetailPage.createCanPlaylist(),isVue){let e=setInterval(function(){getVueInstance()&&(registerRouterChange(),appendToCanPlaylist(getVueCourses()),clearInterval(e))},500)}else appendToCanPlaylist(getJQueryCourses())}!async function(){setTimeout(function(){initRouter(window.location.href)},1e3)}();